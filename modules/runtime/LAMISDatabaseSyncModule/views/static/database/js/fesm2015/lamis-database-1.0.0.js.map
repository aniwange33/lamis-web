{
    "version": 3,
    "file": "lamis-database-1.0.0.js",
    "sources": [
        "ng://lamis-database-1.0.0/lib/services/module.update.service.ts",
        "ng://lamis-database-1.0.0/lib/components/module-updates.component.ts",
        "ng://lamis-database-1.0.0/lib/services/module-updates.route.ts",
        "ng://lamis-database-1.0.0/lib/components/database.sync.component.ts",
        "ng://lamis-database-1.0.0/lib/module.updates.module.ts",
        "ng://lamis-database-1.0.0/public_api.ts",
        "ng://lamis-database-1.0.0/lamis-database-1.0.0.ts"
    ],
    "sourcesContent": [
        "import { Inject, Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { SERVER_API_URL_CONFIG, ServerApiUrlConfig } from '@lamis/web-core';\nimport { Module } from '../model/module.model';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ModuleUpdateService {\n    public resourceUrl = '';\n\n    constructor(protected http: HttpClient, @Inject(SERVER_API_URL_CONFIG) private serverUrl: ServerApiUrlConfig) {\n        this.resourceUrl = serverUrl.SERVER_API_URL + '/api/module-update';\n    }\n\n    installUpdates() {\n        return this.http.get<Module[]>(`${this.resourceUrl}/install-updates`);\n    }\n\n    availableUpdates() {\n        return this.http.get<Module[]>(`${this.resourceUrl}/available-updates`);\n    }\n}\n",
        "import { Component, OnInit } from '@angular/core';\nimport { CardViewBoolItemModel, CardViewItem, CardViewTextItemModel } from '@alfresco/adf-core';\nimport { Module } from '../model/module.model';\nimport { ModuleUpdateService } from '../services/module.update.service';\n\n\n@Component({\n    selector: 'module-update',\n    templateUrl: './module-updates.component.html'\n})\nexport class ModuleUpdatesComponent implements OnInit {\n    modules: Module[] = [];\n    isUpdating = false;\n    installed = false;\n\n    constructor(private service: ModuleUpdateService) {\n    }\n\n    ngOnInit(): void {\n        this.service.availableUpdates().subscribe(res => this.modules = res)\n    }\n\n    getProperties(module: Module): Array<CardViewItem> {\n        const properties = [];\n        const description = new CardViewTextItemModel({\n            label: 'Description',\n            value: module.description,\n            key: 'desc',\n        });\n        properties.push(description);\n        const active = new CardViewBoolItemModel({\n            label: 'Active',\n            value: module.active,\n            key: 'active',\n        });\n        properties.push(active);\n        const version = new CardViewTextItemModel({\n            label: 'version',\n            value: module.version,\n            key: 'version',\n        });\n        properties.push(version);\n        return properties;\n    }\n\n    updateModules() {\n        this.isUpdating = true;\n        this.installed = false;\n        this.service.installUpdates().subscribe(res => {\n            this.modules = res;\n            this.isUpdating = false;\n            this.installed = true;\n        })\n    }\n\n    previousState() {\n        window.history.back();\n    }\n}\n",
        "import { Routes } from '@angular/router';\nimport { ModuleUpdatesComponent } from '../components/module-updates.component';\n\nexport const ROUTES: Routes = [\n    {\n        path: '',\n        data: {\n            title: 'Module Updates',\n            breadcrumb: 'MODULE UPDATES'\n        },\n        children: [\n            {\n                path: '',\n                component: ModuleUpdatesComponent,\n                data: {\n                    authorities: ['ROLE_ADMIN'],\n                    title: 'Module Updates',\n                    breadcrumb: 'MODULE UPDATES'\n                },\n                //canActivate: [UserRouteAccessService]\n            }\n        ]\n    }\n];\n\n",
        "import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { RxStompService } from \"@stomp/ng2-stompjs\";\nimport { Message } from '@stomp/stompjs';\nimport { CardViewBoolItemModel, CardViewDateItemModel, CardViewItem } from '@alfresco/adf-core';\nimport * as moment_ from 'moment';\n\nconst moment = moment_;\n\n@Component({\n    selector: 'database-sync',\n    templateUrl: './database.sync.component.html'\n})\nexport class DatabaseSyncComponent implements OnInit, OnDestroy {\n    syncing = false;\n    tables = '';\n    statusSubscription: Subscription;\n    tableSubscription: Subscription;\n    syncSubscription: Subscription;\n    properties: CardViewItem[] = [];\n    statusProperties: CardViewItem[] = [];\n\n    constructor(private stompService: RxStompService) {\n    }\n\n    ngOnInit(): void {\n        this.statusSubscription = this.stompService.watch(\"/topic/server-status\").subscribe((msg: Message) => {\n            this.properties = [];\n            this.properties.push(new CardViewDateItemModel({\n                key: 'date',\n                value: moment(msg.body),\n                label: 'Last contact with Server',\n                format: 'DD MMM, YYYY HH:MM'\n            }));\n\n            this.properties.push(new CardViewDateItemModel({\n                key: 'date',\n                value: moment(msg.body),\n                label: 'Last successful upload to Server',\n                format: 'DD MMM, YYYY HH:MM'\n            }))\n        });\n\n        this.syncSubscription = this.stompService.watch(\"/topic/server-status\").subscribe((msg: Message) => {\n            this.properties = [];\n            this.properties.push(new CardViewBoolItemModel({\n                key: 'date',\n                value: msg.body === 'true',\n                label: 'Upload Complete',\n            }));\n\n            this.syncing = msg.body === 'false';\n        });\n\n        this.tableSubscription = this.stompService.watch(\"/topic/table-status\").subscribe((msg: Message) => {\n            this.tables = msg.body\n        });\n    }\n\n    ngOnDestroy(): void {\n        this.statusSubscription.unsubscribe();\n        this.tableSubscription.unsubscribe();\n        this.syncSubscription.unsubscribe();\n    }\n\n    sync() {\n        this.syncing = true;\n    }\n\n    previousState() {\n        window.history.back();\n    }\n\n\n}\n",
        "import { CoreModule } from '@alfresco/adf-core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport {\r\n    MatButtonModule,\r\n    MatCardModule,\r\n    MatIconModule,\r\n    MatInputModule,\r\n    MatListModule,\r\n    MatProgressBarModule,\r\n    MatSelectModule,\r\n    MatTableModule\r\n} from '@angular/material';\r\nimport { RouterModule } from '@angular/router';\r\nimport { CovalentDialogsModule, CovalentMessageModule } from '@covalent/core';\r\nimport { ROUTES } from './services/module-updates.route';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatDateFormatModule } from '@lamis/web-core';\r\nimport { CustomFormsModule } from 'ng2-validation';\r\nimport { ModuleUpdatesComponent } from './components/module-updates.component';\r\nimport { DatabaseSyncComponent } from './components/database.sync.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        DatabaseSyncComponent,\r\n        ModuleUpdatesComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        MatInputModule,\r\n        MatIconModule,\r\n        MatCardModule,\r\n        MatSelectModule,\r\n        MatButtonModule,\r\n        RouterModule.forChild(ROUTES),\r\n        MatProgressBarModule,\r\n        FormsModule,\r\n        CovalentMessageModule,\r\n        CovalentDialogsModule,\r\n        MatTableModule,\r\n        MatListModule,\r\n        CoreModule,\r\n        ReactiveFormsModule,\r\n        MatDateFormatModule,\r\n        CustomFormsModule\r\n    ],\r\n    exports: [\r\n    ],\r\n    entryComponents: [],\r\n    providers: [\r\n    ]\r\n})\r\nexport class ModuleUpdatesModule {\r\n}\r\n",
        "/*\r\n * Public API Surface of Clinic\r\n */\r\n\r\nexport * from './lib/module.updates.module';\r\n",
        "/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {DatabaseSyncComponent as Éµa} from './lib/components/database.sync.component';\nexport {ModuleUpdatesComponent as Éµb} from './lib/components/module-updates.component';\nexport {ROUTES as Éµd} from './lib/services/module-updates.route';\nexport {ModuleUpdateService as Éµc} from './lib/services/module.update.service';"
    ],
    "names": [
        "tslib_1.__param"
    ],
    "mappings": "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"
}
